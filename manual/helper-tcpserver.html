<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>

	<title>Ding: TCP Server Helper</title>
	
	<style type="text/css">
		body {
  		margin-top: 1.0em;
  		background-color: #f49648;
		  font-family: "Helvetica,Arial,FreeSans";
  		color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
		h1 { font-size: 3.8em; color: #0b69b7; margin-bottom: 3px; }
		h1 .small { font-size: 0.4em; }
		h1 a { text-decoration: none }
		h2 { font-size: 1.5em; color: #0b69b7; }
    h3 { color: #0b69b7; }
    a { color: #0b69b7; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; font-style: italic;}
    .download { float: right; }
		pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }
	</style>
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21070993-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>	
</head>

<body>

<H1><u>The TCPServerHelper</u></H1>
 <g:plusone></g:plusone>
<H3>Class</H3>
Ding\Helpers\TCP\TCPServerHelper

<H3>Description</H3>
<p>
Use this helper to create one or more tcp server by just implementing the interface
Ding\Helpers\TCP\ITCPServerHandler. You will need to implement the
following methods:
<ul>
  <li>beforeOpen(): Called right before opening the socket.</li>
  <li>beforeListen(): Called right before start listening in the socket for new connections.</li>
  <li>close(): Called right after the server socket has ben closed.</li>
  <li>handleConnection(): Called when a new connection has been established, will receive the ip:port of the client.</li>
  <li>handleData(): Called when a client has sent data, will receive the ip:port of the client.</li>
  <li>disconnect(): Called when a client disconnects, will receive the ip:port of the client.</li>
  <li>readTimeout(): Called when the read timeout has expired on a client, will receive the ip:port of the client.</li>
</ul>
</p>
<p>
The helper itself has some useful method to control its behavior:
<ul>
  <li>disconnect(): Disconnects the given client.</li>
  <li>open(): Opens the server socket.</li>
  <li>read(): Reads data from the given client (usually used from the handleData() method above).</li>
  <li>write(): Sends data to the given client.</li>
  <li>close(): Closes the server socket.</li>
  <li>process(): This is supposed to be called automatically if you declare(ticks=1). The helper 
  uses register_tick_function() to achieve this. If you dont want to declare(ticks=1), you need
  to call this method from your own main loop. It will select() the socket, check for data
  available, control timeouts, etc.</li>
</ul>
</p>

<H3>Example</H3>
<ul>
  <li><a href="https://github.com/marcelog/Ding/tree/master/docs/examples/TCPServerHelper">docs/examples/TCPServerHelper</a>: Using the xml driver.</li>
</ul>
